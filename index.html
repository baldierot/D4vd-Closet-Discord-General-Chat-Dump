<!DOCTYPE html>
<html>
<head>
    <title>File Viewer</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden; /* Prevent body scrollbars */
        }
        body.resizing {
            user-select: none; /* Prevent text selection during resize */
        }
        #file-list-container {
            width: 250px;
            min-width: 100px; /* Prevent resizing to be too small */
            border-right: 1px solid #ccc;
            padding: 10px;
            display: flex;
            flex-direction: column;
            position: relative; /* For the resizer */
        }
        #file-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
            flex-grow: 1;
            overflow-y: auto;
            overflow-x: hidden; /* Hide horizontal scrollbar */
        }
        #file-list li {
            padding: 5px;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            direction: rtl; /* Clip from the left */
            text-align: left;
        }
        #file-list li.selected {
            background-color: #eee;
        }
        #file-list li.loaded {
            background-color: #d8eafc;
        }
        #load-button {
            margin-top: 10px;
            padding: 10px;
            width: 100%;
        }
        #resizer {
            width: 5px;
            cursor: col-resize;
            background: #ccc;
            position: absolute;
            right: 0;
            top: 0;
            height: 100%;
            z-index: 1000;
        }
        #iframe-container {
            flex-grow: 1;
            display: flex; /* Use flexbox for the iframe */
        }
        iframe {
            flex-grow: 1; /* Allow iframe to grow */
            border: none;
        }
        iframe.resizing-iframe {
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="file-list-container">
        <ul id="file-list"></ul>
        <button id="load-button">Load</button>
        <div id="resizer"></div>
    </div>
    <div id="iframe-container">
        <iframe id="viewer"></iframe>
    </div>

    <script>
        const body = document.body;
        const fileListContainer = document.getElementById('file-list-container');
        const resizer = document.getElementById('resizer');
        const fileList = document.getElementById('file-list');
        const loadButton = document.getElementById('load-button');
        const viewer = document.getElementById('viewer');
        let selectedFile = null;
        let loadedFile = null;

        fetch('file_list.txt')
            .then(response => response.text())
            .then(data => {
                const files = data.split('\n').filter(file => file.trim() !== '');
                files.forEach(file => {
                    const listItem = document.createElement('li');
                    listItem.textContent = file;
                    listItem.addEventListener('click', () => {
                        if (selectedFile) {
                            selectedFile.classList.remove('selected');
                        }
                        selectedFile = listItem;
                        selectedFile.classList.add('selected');
                    });
                    fileList.appendChild(listItem);
                });
            });

        loadButton.addEventListener('click', () => {
            if (selectedFile) {
                if (loadedFile) {
                    loadedFile.classList.remove('loaded');
                }
                viewer.src = selectedFile.textContent;
                loadedFile = selectedFile;
                loadedFile.classList.add('loaded');
            }
        });

        resizer.addEventListener('mousedown', (e) => {
            e.preventDefault();
            body.classList.add('resizing');
            viewer.classList.add('resizing-iframe');
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);
        });

        function handleMouseMove(e) {
            const newWidth = e.clientX;
            if (newWidth > 100 && newWidth < window.innerWidth - 100) { // Add some limits
                fileListContainer.style.width = newWidth + 'px';
            }
        }

        function handleMouseUp() {
            body.classList.remove('resizing');
            viewer.classList.remove('resizing-iframe');
            document.removeEventListener('mousemove', handleMouseMove);
            document.removeEventListener('mouseup', handleMouseUp);
        }
    </script>
</body>
</html>